## 说明
- 内容主要是本人学习数据库的笔记汇总。
- 计划的学习路线：
- MySQL（InnoDB)的设计原理 -> B+树 -> 动手实践 -> 其他存储系统的实现。
-
## 名词解释
-
  #+BEGIN_QUOTE
  为避免理解偏差，本文默认使用MySQL数据库，如数据库实例，指的是MySQL中的数据库实例。
  #+END_QUOTE
- **数据库**: 物理操作系统或其他形式文件类型的集合。MySQL中，数据库文件可以是frm、MYD、MYI、idb结尾的文件。
- **数据库实例**: MySQL的数据库实例由后台线程和一个共享内存区组成。（和**数据库**所指的物理文件不同，实例是一个程序，MySQL被设计为单进程多线程架构，其在系统上表现为一个进程）
- **缓冲区**: 内存
- **脏页**: 指缓冲区中的页因为DML操作被修改时，和磁盘上的页出现了不一致，将缓冲区的页称为脏页（Dirty Page）
-
## E1. MySQL中的存储引擎对比
- MySQL区别于其他数据库的一个主要特点就是其插件式的表存储引擎。（不同存储引擎适用于不同的场景），下面简单介绍下主要的存储引擎及其特点：
-
#### InnoDB
- 设计目标主要面向在线事务处理（OLTP）应用。是MySQL中最常用的存储引擎，具备高可用、高性能以及高可扩展性。
-
#### MyISAM
- 不支持事务、表锁设计，支持全文索引，主要面向一些OLAP数据库应用。特点是它的缓冲池只缓存索引文件，而不缓存数据文件。
-
#### NDB
- 特点是数据全部放在内存中，因此主键查找（primary key lookups）的速度极快，并且通过添加节点可以线性地提高数据库性能，是高可用、高性能的集群系统。
-
#### Maria
- 设计目标是用来取代MyISAM。
-
## E2. InnoDB存储引擎
- InnoDB主要有4个版本，新的版本兼容旧版本，这会体现在一些场景下的实现里。
-
### InnoDB的架构
- InnoDB有多个内存块，可以认为这些内存块组成了一个大的内存池，主要负责：
-
  1. 维护所有进程/线程需要访问的多个内部数据结构；
-
  2. 缓冲区：缓存磁盘上的数据，方便快速地读取，同时在对磁盘文件的数据修改之前在这里缓存；
-
  3. 重做日志（Redo Log）缓冲
- ...
- TODO 补一张图 P19 2-1
-
#### 后台线程
- 主要由四类线程组成。
- **1. master thread**: 核心线程。负责将缓冲区中的数据异步刷新到磁盘，保证数据的一致性；合并插入缓冲，回收Undo页。
- **2. IO Thread**: InnoDB中大量使用AIO（Async IO）来处理写IO请求，以此提升性能（比如合并多个IO的操作）。
-
-
-
-
-
-
## 参考资料
- 《MySQL 技术内幕 InnoDB存储引擎（第2版）》 [著] 姜承尧